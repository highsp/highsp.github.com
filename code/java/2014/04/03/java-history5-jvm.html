<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="description" content="Java历史: JVM发展史">
		
		<meta name="author" content="">
		
		<meta name="keywords" content="Java历史,JVM发展史">
		
		<link rel="shortcut icon" href="/assets/images//favicon.ico">

		
			
		
		


		<title>Java历史: JVM发展史</title>

		<link rel='alternate' type="application/rss+xml" title="RSS 2.0 - Articiles" href="http://highsp.cn/rss.xml">
		<link rel='alternate' type="application/atom+xml" title="Atom - Articiles" href="http://highsp.cn/atom.xml">
		<!-- Bootstrap core CSS -->
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="/assets/css//main.css" rel="stylesheet">

		<!-- Just for debugging purposes. Don't actually copy this line! -->
		<!--[if lt IE 9]><script src="/assets/js//ie8-responsive-file-warning.js"></script><![endif]-->

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		<script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		
	</head>

	<body>
		<!-- Navigation bar -->
		<div class="navbar blue-bg navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle label-primary" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>

					
					


					<a class="navbar-brand" href="/#">带码的世界</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						
						<li><a href="/">首页</a></li>
						

						

						
							
								
							

							
								
								


								<li class=""><a href="/algorithm">算法理论 <span class="badge">6</span></a></li>
							
						
							
								
							

							
								
									
									


									<li class="dropdown active">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">带码的世界 <span class="badge">11</span><b class="caret"></b></a>
									<ul class="dropdown-menu">
										
										
											
												
												



												
												
												


												<li><a href="/code/java">java <span class="badge">8</span></a></li>
												
											
										
											
											
										
											
											
										
											
											
										
											
											
										
											
												
												



												
												
												


												<li><a href="/code/algorithm">算法理论 <span class="badge">6</span></a></li>
												
											
										
											
											
										
											
											
										
											
											
										
											
											
										
											
											
										
									</ul>
									</li>
								
							
						
							
								
							

							
								
							
						
							
								
							

							
								
								


								<li class=""><a href="/internet">互联网 <span class="badge">1</span></a></li>
							
						
							
								
							

							
								
								


								<li class=""><a href="/scalability">可扩展性 <span class="badge">2</span></a></li>
							
						
					</ul>
					
	
			
 			<form class="navbar-form navbar-right" role="form" action="https://www.google.com.hk/search" target="_blank">
	<div class="form-group">
	<input type="text" class="form-control" placeholder="关键字" name="query" autocomplete="off">
	<input type="hidden" value="" name="as_sitesearch"> 
	</div>
	<button class="btn btn-default" type="submit">搜索</button>
</form>

	


					
				</div><!--/.navbar-collapse -->
			</div>
		</div>

		<!-- main page -->
		<div class="container main-page">
			<div class="row">
				<div class="col-sm-8">
					<h1 class="page-header">Java历史: JVM发展史
	<br>
	
	
	<span class="label label-info font-h6">
	<date class="date-pub" title="2014-04-03T00:00:00+08:00" datetime="2014-04-03T00:00:00+08:00" pubdate>
	<span class="month"><abbr>April</abbr></span>
	<span class="day">03</span>
	<span class="year">2014</span>
	</date>
	
</span>

</h1>
<div class="lead">
<h2>Java虚拟机的起源与构造</h2>

<p>当我们说到“Java”这个词的时候，指的是四个相互关联的概念：Java语言、Java 
API、Java Class文件格式、Java虚拟机。整个Java体系是基于Java 虚拟机构造的，正
因为如此，才能实现Java的安全性和网络移动性。Java并非是第一个采用“虚拟机”概
念的体系，但却是第一个得到广泛运用的虚拟机平台。 “虚拟”，是一种隔离物理资源
与逻辑资源的手段。Java虚拟机的“虚拟”，则是用来隔离物理机器、底层操作系统与J
ava语言规范实现的手段。 </p>

<p>虽然Java是一种面向对象的语言，我们平时大量使用的，是对象间的多态、组合(Co
mposition)、委派（Delegation）,但当我们讨论虚拟机的时候，我们看见的基本概念却
是“栈(Stack)”和“堆(Heap)”。根据冯诺依曼的“存储计算”模型，所有的代码都保
存在代码空间中，随着程序计数器指针的变化进行程序的执行、跳转。Java虚拟机中没
有寄存器的概念，方法调用是采用“栈”进行的，这是一种安全、简洁的方法。 </p>

<p>Java虚拟机通过类装载器支持对类的隔离，这也是Java实现安全性的基础。每个类
都具有自己的命名空间，在具有不同安全级别的沙箱中运行，因此不会产生低安全级别
的代码来越权访问高级别代码的机会。类装载器的出现是Java虚拟机与大部分用C实现的
虚拟机的显著不同之处。 </p>

<p>Java虚拟机的另外一个显著特点就是实现了自动的垃圾收集。在往常，写程序的时
候要牢记对象之间的关联，在每个程序块中假若申请了对象空间，就必须在出口释放掉
，方法调用往往同时也就是对象的边界。而自动垃圾收集带给开发者的最大好处，就是
可以非常方便地从整体上把系统的对象组织成一张对象图，只需往这张图中添加对象，
维护对象之间的关联，却不需要自己做复杂的清扫工作。正是有了这种思维单纯的对象
图的支持，OR Mapping(关系数据库与对象映射）技术在最近得以大行其道，设计模式也
更容易被Java群体所接受。 </p>

<h2>虚拟机的优化</h2>

<p>1995年第一代的Java出台之时，其虚拟机执行是依靠“字节码解释器（Byte Code 
Interceptor）”的，也就是说每条指令都由虚拟机来当场解释执行，这造成速度令人抓
狂地缓慢。更有甚者有人开始总结许多的“速度优化经验”，比如说：“尽量把所有的
代码都放在较大的方法中执行”与“少用接口”等等，这完全与Java语言的设计目的背
道而驰，现在看起来是多么可笑的奇谈怪论，当时却是很多程序员津津乐道的经验之谈
。无他，Java本身执行太慢了。Java生命的前十分之三就是如此缓慢地渡过的。 </p>

<p>于是，Sun的工程师开始拼命想着提高执行速度。JIT静态编译器的出现是在1996年
十月，Sun放出了第一个编译器。JIT编译器在每段代码执行前进行编译，编译的结果为
本地静态机器码，执行速度有了质的提高。Symantec公司当时凭借其傲人的JIT编译器，
在整个Java界受到热烈的追捧。在其后的1998年，Java 1.2发布的时候，附带了JIT编译
器，从此Java的使用者终于可以抛开上面说的那些奇怪的“速度优化经验”了。 </p>

<p>JIT静态编译器虽然可以解决一些问题，但是性能仍然和C/C++有很大的差距。对一
段程序而言，一名优秀的程序员是如何来改进运行速度的呢？首先，他不会傻到把所有
的代码都来优化，他会观察、思考到底哪段代码对整体性能影响最大？然后集中精力来
优化这一段代码。按照经验，整个程序 10%-20%的代码，会占据 80%-90%的运行时间。
用这种方法，在同样的时间、付出同样程度的努力后，这名优秀的程序员使整个程序的
性能得到了很大程度的优化。HotSpot引擎，就是模仿人工的这种方法进行优化的。在程
序运行的开始，Java代码仍然解释执行，但HotSpot引擎开始进行采样（Profiling)。 </p>

<p>根据采样的结果，决定某段程序是占用较多运行时间的，就认为它是“HotSpot”，
它也就是目前程序的瓶颈， 引擎开始启动一个单独的线程进行优化。因为不象原始的 
JIT编译器那样无差别的编译所有代码，HotSpot引擎可以集中精力来对HotSpot代码进行
深度优化，这样这部分代码执行起来更加迅捷。之前的静态编译器只能按照预定的策略
进行编译优化，而HotSpot引擎的优化是基于采样的结果的，因此这种方法对所有的应用
程序都有效。1999年3月27日，Sun放出了第一个HotSpot引擎。在随后的2000年5月的JDK
 1.3中，包含了HotSopt引擎，这也使1.3成了一个具有里程碑意义的发行版本。到这里
，Java的十年生命，已经过去了一半。 </p>

<p>HotSpot代表的是一种动态编译的技术。对Java这种大量使用委派、组合等面向对象
特性的程序来说，动态编译比起静态编译来有显著的优势。比如Method Inlining。方法
的调用是一个很耗时的操作，假若可以把方法调用直接内嵌到调用者的代码中，就可以
节省大量的时间， 这被称为“Method Inlining”。因为涉及到类的重载，静态优化很
难确切知道哪些属性、方法被重载，因此很难对method进行合并，只好在方法内部进行
静态编译，假若每个方法都很小，静态优化能起到的作用也就比较小。而动态编译因为
可以完全随时掌握类的重载情况，就可以把相关的方法合并进行深度优化。现代的Java
程序，特别是在设计模式教育得到普及之后，大量使用类的继承、委派，形成了很多短
小的方法，动态编译的优势就更加明显。 </p>

<h2>自从出现了HotSpot之后，整个Java界为之一振。</h2>

<p>最近的五年，就是继续优化的五年。继续进行优化的方法有几条路，一是研究新的
采样算法。因为采样关系到不同的优化策略，会对整体性能有比较大的影响。二是研究
深度优化的方法。三是研究垃圾收集的算法。垃圾收集会带来程序短暂的停顿，这会带
来负面的用户体验。于是，如何提高垃圾收集的效率，减少延迟，出现了五花八门的算
法，比如渐进式收集、火车算法等。在多处理器的时候，如何利用多处理器进行并行收
集也是研究的一个热点。这方面，BEA的JRocket走在了前面。 </p>

<h2>现实生活中的虚拟机</h2>

<p>最后，让我们来盘点一下目前市面上可见的各个虚拟机。 </p>

<p>首先要提到的，毫无疑问是Sun的虚拟机。作为大众心目中的“官方实现”，Sun拥
有最大的用户群，并且拥有“兼容基准”的地位，其他虚拟机都必须要考虑和Sun虚拟机
的兼容性问题。比如 JRocket就会在某些特殊情况下表现出和Sun不同的特性，可能对程
序运行有影响。不过Sun也的确没有让广大用户失望，虽然在早期性能比不上Symantec,
后来在1.2 的时候性能又被IBM超越，但Sun一直在努力革新，特别是 1.4.2之后，性能
有了长足的进步。虽然JDK 1.5的虚拟机在性能上没有什么提高，但是增强了稳定性，据
说修改了8000处bug，真是让人汗流不止。原来我们在1.4.2下面一直在享受这么多bug啊
。</p>

<p>其次是老牌劲旅IBM。IBM的JDK在1.3的时代创下了最好的性能记录，从此树立了高
端形象。特别是在其WebSphere产品中得到了很好的评价。其JDK也是最早支持64bit的JD
K之一。到了现在，IBM JDK在高端仍然是和BEA可以一拼的。 </p>

<p>然后是后起之秀，BEA的JRocket。说到BEA突然在JVM领域一夜之间异军突起，多少
让人有些瞠目，不过它采取的战略特别简单：自己没有，索性花钱买了在此领域深有研
究的JRocket，在前面加上BEA的标志就可以了。JRocket瞄准高端服务器市场，在多处理
器环境下有不俗的表现。 </p>

<p>除此之外，还有几个开放源代码的JVM值得一提。首先就是大名鼎鼎的JikesRVM。说
起其大名，大多数人都知道Jikes编译器是 IBM开发的，效率比同等的javac编译器高得
多，很多开发者都使用Jikes编译器来取代javac。而JikesRVM则是IBM开源出来的一整套
虚拟机技术，包含了JIT，GC的完整实现，在其网站上也有众多的论文，实在是想要深入
研究JVM者的绝佳资源(http://jikesrvm.sourceforge.net)。 </p>

<p>Kaffe是一个老牌的JVM,不过现在已经很少听到了。作者撰写此文时，www.kaffe.or
g网站已经没有响应，也不知道现在的情况如何了。 </p>

<p>GNU则有两个计划：GCJ和GNU classpath。GNU classpath是一个底层实现，而GCJ是
支持java的预编译器。 </p>

<h2>结束语</h2>

<p>时光流转，轰轰烈烈的Java虚拟机性能争论仿佛还在耳边回响，现在新的争论却已
经是“Java的性能是否已经超越C/C++”。 </p>

<p>Joakim Dahlstedt 是 JRockit 的主要架构设计师之一，他坚持认为，Java绝不是
一种速度慢，效率低的语言，JVM 是一个关键的组件，确保了系统的部署与运行和开发
一样快速、轻松。特别是在目前开发趋势是采用大量预制的框架时，动态编译有可能比C
/C++这样的静态优化获得更好的性能。</p>

</div>


<div class="row">
	<div class="col-md-6">
		
<div>
	<span>标签:</span>
	
	<span class="label label-default">Java</span>
	
	<span class="label label-primary">历史</span>
	
</div>


	</div>
	<div class="col-md-4 col-md-offset-2">
		
	
			
 			<div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a title="分享到QQ空间" href="#" class="bds_qzone" data-cmd="qzone"></a><a title="分享到新浪微博" href="#" class="bds_tsina" data-cmd="tsina"></a><a title="分享到腾讯微博" href="#" class="bds_tqq" data-cmd="tqq"></a><a title="分享到人人网" href="#" class="bds_renren" data-cmd="renren"></a><a title="分享到微信" href="#" class="bds_weixin" data-cmd="weixin"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


	


	</div>
</div>
<div>
<ul class="pager">
	
	<li><a href="/scalability/2014/05/02/secret-to-10m-concurrency.html" title="如何做到千万并发连接">上一页</a></li>
	

	
	<li><a href="/code/java/2014/04/02/java-history4-org.html" title="Java历史: 十大组织">下一页</a></li>
	
</ul>
</div>


				</div>
				<!-- sidebar -->
				<div class="col-sm-3 col-sm-offset-1">
					<div class="sidebar-module sidebar-module-inset">
						<a href="/rss.xml" target="_blank"><img style="width:34px" src="/assets/images//feed_icon_128.png"></a>
						
						
						<a href="mailto:highsp.cn@gmail.com" target="_blank"><img style="width:38px" src="/assets/images//gmail_icon_128.png"></a>
						
					</div>

					<div class="sidebar-module" >
						<h4>最新文章</h4>
						<ol class="list-unstyled">
							
							<li><a href="/scalability/2014/05/06/scalable-architecture-patterns.html">可伸缩性系统架构</a></li>
							
							<li><a href="/scalability/2014/05/02/secret-to-10m-concurrency.html">如何做到千万并发连接</a></li>
							
							<li><a href="/code/java/2014/04/03/java-history5-jvm.html">Java历史: JVM发展史</a></li>
							
							<li><a href="/code/java/2014/04/02/java-history4-org.html">Java历史: 十大组织</a></li>
							
							<li><a href="/code/java/2014/04/02/java-history3-people.html">Java历史: 十大牛人</a></li>
							
							<li><a href="/code/java/2014/04/02/java-history2-products.html">Java历史: 十大产品</a></li>
							
							<li><a href="/code/java/2014/04/02/java-history1-brief.html">Java历史</a></li>
							
							<li><a href="/algorithm/2014/04/01/mostest-important-algorithms.html">最重要的34个计算机算法</a></li>
							
							<li><a href="/code/algorithm/2014/04/01/mostest-important-algorithms.html">最重要的34个计算机算法</a></li>
							
							<li><a href="/internet/2014/03/28/deep-inside-chinese-internet.html">解密中国互联网</a></li>
							
						</ol>
					</div>

					<div class="sidebar-module" >
						<h4>标签</h4>
						
						
						<a href="/tags.html#"><span class="label label-default">github</span></a>
						
						<a href="/tags.html#1-ref"><span class="label label-primary">Java</span></a>
						
						<a href="/tags.html#2-ref"><span class="label label-success">并行编程</span></a>
						
						<a href="/tags.html#3-ref"><span class="label label-info">algorithm</span></a>
						
						<a href="/tags.html#4-ref"><span class="label label-warning">互联网</span></a>
						
						<a href="/tags.html#5-ref"><span class="label label-danger">历史</span></a>
						
						<a href="/tags.html#6-ref"><span class="label label-default">可伸缩性</span></a>
						
						<a href="/tags.html#7-ref"><span class="label label-primary">C10M</span></a>
						
						<a href="/tags.html#8-ref"><span class="label label-success">scalability</span></a>
						
						<a href="/tags.html#9-ref"><span class="label label-info">pattern</span></a>
						
						<a href="/tags.html#10-ref"><span class="label label-warning">architecture</span></a>
						
					</div>

					<div class="sidebar-module">
						<h4>归档</h4>
						<ol class="list-unstyled">
							
							
							
							
							
							
							
							

							
								
							
							

							
							
							
							
							
							

							
							
								<li><a href="/scalability/2014/05/06/scalable-architecture-patterns.html">2014 05(2)</a></li>
								
								
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							
								<li><a href="/code/java/2014/04/03/java-history5-jvm.html">2014 04(7)</a></li>
								
								
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							
								<li><a href="/internet/2014/03/28/deep-inside-chinese-internet.html">2014 03(6)</a></li>
								
								
							

							
							
							
							
							
							

							
							

							
							
							
							
							
							

							
							
								<li><a href="/code/algorithm/2014/02/01/how-to-encrypt-github.html">2014 02(2)</a></li>
								
								
							

							
							
							
						</ol>
					</div>

					
					<!-- sidebar -->
				</div>
			</div>

			<hr>

			<footer>
			
			


			<p>&copy; <script>document.write(new Date().getFullYear());</script> 带码的世界 <a href="/">http://highsp.cn</a></p>
			<p><a href="http://highsp.cn/sitemap.xml">站点地图</a></p>
			</footer>
		</div> <!-- /container -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		
	
			
 			<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-42967195-2', 'highsp.cn');
	  ga('send', 'pageview');
</script>

	


	</body>
</html>
